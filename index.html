<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <div>
      <button id="add-input">Add input</button>
    </div>
    <div>
      <button id="create-file">Create file</button>
      <input
        id="audio-length"
        type="number"
        step="0.1"
        placeholder="Audio length"
        value="10"
      />
    </div>
    <div id="input-list" style="margin-top: 20px"></div>
    <script type="module" src="src/app.js"></script>
    <script>
      // Code for managing the form
      const addInput = document.querySelector("#add-input");
      const inputList = document.querySelector("#input-list");
      const createInput = ({
        label = "",
        name = "",
        placeholder = "",
        value = "",
        type = "text",
        step = null,
        className = "",
      }) => {
        const blockNode = document.createElement("div");
        blockNode.style.margin = "10px";
        const input = document.createElement("input");
        input.placeholder = placeholder;
        input.value = value;
        input.type = type;
        input.name = name;
        if (className) input.className = className;
        if (step) {
          input.step = step;
        }
        if (label) {
          const labelNode = document.createElement("label");
          const span = document.createElement("span");
          labelNode.textContent = label;
          labelNode.appendChild(input);
          blockNode.appendChild(labelNode);
        } else {
          blockNode.appendChild(input);
        }
        return blockNode;
      };
      addInput.addEventListener(
        "click",
        () => {
          const form = document.createElement("form");
          form.style.padding = "10px";
          form.style.background = "lightgray";

          const input = document.createElement("input");
          input.name = "file";
          input.type = "file";
          form.appendChild(input);

          const gainInput = createInput({
            name: "gain",
            label: "Gain",
            type: "number",
            placeholder: "Gain",
            value: 1,
            step: 0.1,
          });
          const seekInput = createInput({
            name: "seek",
            label: "Seek",
            type: "number",
            placeholder: "Seek",
            step: 0.1,
          });
          const durationInput = createInput({
            name: "duration",
            label: "Dura",
            type: "number",
            placeholder: "Duration",
            step: 0.1,
          });
          const startInput = createInput({
            name: "start",
            label: "Start",
            type: "number",
            placeholder: "Start",
            step: 0.1,
          });
          form.appendChild(gainInput);
          form.appendChild(seekInput);
          form.appendChild(durationInput);
          form.appendChild(startInput);

          inputList.appendChild(form);
        },
        false
      );
    </script>
  </body>
</html>
